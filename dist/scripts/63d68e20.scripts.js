"use strict";angular.module("ScreenEasyApp",["fireace","ngAnimate","ngRoute","ngResource","ui.bootstrap","simplewebrtc","angularLocalStorage"]).constant("API_ENDPOINT","http://screeneasy-api.herokuapp.com").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/candidate/setup",{templateUrl:"views/questions.html",controller:"QuestionsCtrl"}).when("/schedule",{templateUrl:"views/schedule.html",controller:"ScheduleCtrl"}).when("/interviews",{templateUrl:"views/interviews.html",controller:"InterviewsCtrl"}).when("/postmortem/:hash",{templateUrl:"views/postmortem.html",controller:"PostmortemCtrl"}).when("/interview/:hash",{templateUrl:"views/interview.html",controller:"InterviewCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("ScreenEasyApp").controller("MainCtrl",["$scope",function(){}]),angular.module("ScreenEasyApp").controller("QuestionsCtrl",["$scope","interviewQuestionResource",function(a,b){var c=b.query();c.$promise.then(function(b){a.questions=b}),a.addQuestion=function(){var c=new b;c.title=a.question.title,c.body=a.question.body,c.tags=a.question.tags;var d=c.$save();d.then(function(){a.questions.push(c),a.title="",a.body="",a.tags=""})},a.is_deleted=!1,a.deleteQuestion=function(c){var d=b.delete({id:c.id});d.$promise.then(function(){angular.forEach(a.questions,function(b,d){return JSON.stringify(b)===JSON.stringify(c)?(a.questions.splice(d,1),void 0):void 0})})}}]),angular.module("ScreenEasyApp").controller("InterviewCtrl",["$scope","$routeParams","interviewResource","interviewQuestionResource","githubResource","$location","storage",function(a,b,c,d,e,f,g){if(a.hash=b.hash,!a.hash)return f.path("#/schedule");var h=c.query({hash:a.hash}).$promise;h.then(function(b){var c=b.data[0].candidate;console.log(c),a.developer={},a.developer.profile={},a.developer.profile=g.get("developer.profile");var h=e.get({name:c.github_handle,type:"basic"}).$promise;if(h.then(function(b){a.developer.profile={},a.developer.profile.basic=b.basic}),g.get("interview.questions"))a.techQuestions=g.get("interview.questions");else{var i=d.query();i.$promise.then(function(b){a.techQuestions=b,g.set("interview.questions",a.techQuestions)})}var j=e.get({name:c.github_handle,type:"gists"}).$promise;j.then(function(b){a.developer.profile.gists=b.gists});var k=e.get({name:c.github_handle,type:"repos"}).$promise;k.then(function(b){a.developer.profile.own_repos=b.own_repos,a.developer.profile.contributed_repos=b.contributed_repos}),a.endInterview=function(){f.path("/postmortem/"+a.hash)}})}]),angular.module("ScreenEasyApp").controller("ScheduleCtrl",["$scope","$location","storage","interviewResource","emailResource",function(a,b,c,d,e){var f=new Date;f.setMinutes(0),a.interviewTime=f,a.scheduleInterview=function(){var f={interviewer:a.interviewer,candidate:a.candidate,interviewDate:a.interviewDate,hash:md5(JSON.stringify([a.interviewer,a.candidate,a.interviewDate]))};a.show_interview_url!=a.show_interview_url,a.interview_url=b.absUrl().replace("schedule","")+"interview/"+f.hash;var g=new e;g.to=a.candidate.email,g.message="Interview link"+f.hash;var h=new e;h.to=a.candidate.email,h.message="hello";var i=g.$save();i.then(function(a){console.log(a)});var i=h.$save();i.then(function(a){console.log(a)}),c.set("candidate.info",a.candidate);var j=d.save(f).$promise;j.then(function(a){console.log(a)})}}]),angular.module("ScreenEasyApp").controller("PostmortemCtrl",["$scope",function(){}]),angular.module("ScreenEasyApp").filter("interviewQuestions",function(){return function(a,b){if(!b)return a;var c=[];return b=b.toLowerCase(),angular.forEach(a,function(a){a.hasOwnProperty("title")&&a.title&&-1!==a.title.toLowerCase().indexOf(b)&&c.push(a),a.hasOwnProperty("created")&&a.created&&-1!==a.created.toLowerCase().indexOf(b)&&c.push(a),a.hasOwnProperty("body")&&a.body&&-1!==a.body.toLowerCase().indexOf(b)&&c.push(a),a.hasOwnProperty("source")&&a.source&&-1!==a.source.toLowerCase().indexOf(b)&&c.push(a)}),c}}),angular.module("ScreenEasyApp").factory("interviewQuestionResource",["$resource","API_ENDPOINT",function(a,b){return a(b+"/v1/interview/question/:id",{id:"@Id"},{update:{method:"PUT"}})}]),angular.module("ScreenEasyApp").factory("githubResource",["$resource","API_ENDPOINT",function(a,b){return a(b+"/v1/developer/:name/:type",{name:"@name",type:"@type"},{update:{method:"PUT"}})}]),angular.module("ScreenEasyApp").factory("emailResource",["$resource","API_ENDPOINT",function(a,b){return a(b+"/email",{},{update:{method:"PUT"}})}]),angular.module("ScreenEasyApp").controller("InterviewsCtrl",["$scope","interviewResource",function(a,b){var c=b.query({}).$promise;c.then(function(b){a.interviews=b.data})}]),angular.module("ScreenEasyApp").factory("interviewResource",["$resource","API_ENDPOINT",function(a,b){return a(b+"/interview",{},{query:{method:"GET"}})}]),angular.module("ScreenEasyApp").controller("LoginCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("ScreenEasyApp").directive("interviewQuestion",function(){return{templateUrl:"views/partial/question.html",transclude:!1,restrict:"EA",controller:"QuestionsCtrl",scope:{question:"="}}}),angular.module("ScreenEasyApp").filter("Candidate",function(){return function(a,b){if(!b)return a;var c=[];return b=b.toLowerCase(),angular.forEach(a,function(){}),c}});